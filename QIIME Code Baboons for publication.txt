#import sequences into QIIME2singularity exec -B /projects/b1057/ -B /projects/b1057/baboons_mm_sj_training -B /projects/b1057 /projects/b1057/qiime2-core2020-2.simg qiime tools import --type 'SampleData[PairedEndSequencesWithQuality]' --input-path /projects/b1057/baboons_mm_sj_training/baboon_manifest.csv --output-path /projects/b1057/baboons_mm_sj_training/maddy/baboon-paired-end-demux.qza --input-format PairedEndFastqManifestPhred33V2#visualize sequence informationsingularity exec -B /projects/b1057/ -B /projects/b1057/baboons_mm_sj_training -B /projects/b1057 /projects/b1057/qiime2-core2020-2.simg qiime demux summarize --i-data /projects/b1057/baboons_mm_sj_training/maddy/baboon-paired-end-demux.qza --o-visualization /projects/b1057/baboons_mm_sj_training/maddy/baboon-paired-end-demux.qzv#denoisesingularity exec -B /projects/b1057/ -B /projects/b1057/baboons_mm_sj_training -B /projects/b1057 /projects/b1057/qiime2-core2020-2.simg qiime dada2 denoise-paired --i-demultiplexed-seqs /projects/b1057/baboons_mm_sj_training/maddy/baboon-paired-end-demux.qza --p-trunc-len-f 270 --p-trunc-len-r 270 --p-trim-left-f 20 --p-trim-left-r 20 --p-max-ee-f 5 --p-max-ee-r 5 --p-n-threads 8 --o-table /projects/b1057/baboons_mm_sj_training/maddy/table.qza --o-representative-sequences /projects/b1057/baboons_mm_sj_training/maddy/rep-seqs.qza --o-denoising-stats /projects/b1057/baboons_mm_sj_training/maddy/dada2denoising-stats.qza?#visualize output singularity exec -B /projects/b1057/ -B /projects/b1057/baboons_mm_sj_training -B /projects/b1057 /projects/b1057/qiime2-core2020-2.simg qiime metadata tabulate --m-input-file /projects/b1057/baboons_mm_sj_training/maddy/dada2denoising-stats.qza --o-visualization /projects/b1057/baboons_mm_sj_training/maddy/dada2denoising-stats.qzv?#make treesingularity exec -B /projects/b1057/ -B /projects/b1057/baboons_mm_sj_training -B /projects/b1057 /projects/b1057/qiime2-core2020-2.simg qiime phylogeny align-to-tree-mafft-fasttree --i-sequences /projects/b1057/baboons_mm_sj_training/maddy/rep-seqs-275.qza --o-alignment /projects/b1057/baboons_mm_sj_training/maddy/aligned-rep-seqs-275.qza --o-masked-alignment /projects/b1057/baboons_mm_sj_training/maddy/masked-aligned-rep-seqs.qza --o-tree /projects/b1057/baboons_mm_sj_training/maddy/unrooted-tree.qza --o-rooted-tree /projects/b1057/baboons_mm_sj_training/maddy/rooted-tree.qza#assign taxonomysingularity exec -B /projects/b1057/ -B /projects/b1057/baboons_mm_sj_training -B /projects/b1057 /projects/b1057/qiime2-core2020-2.simg qiime feature-classifier classify-sklearn --i-classifier /projects/b1057/gg-13-8-99-nb-classifier-qiime2020.2.qza --i-reads /projects/b1057/baboons_mm_sj_training/maddy/rep-seqs-275.qza --o-classification /projects/b1057/baboons_mm_sj_training/maddy/taxonomy.qza#visualize datasingularity exec -B /projects/b1057/ -B /projects/b1057/baboons_mm_sj_training -B /projects/b1057 /projects/b1057/qiime2-core2020-2.simg qiime metadata tabulate --m-input-file /projects/b1057/baboons_mm_sj_training/maddy/taxonomy.qza --o-visualization /projects/b1057/baboons_mm_sj_training/maddy/taxonomy.qzv#filter out unwanted reads from chloroplasts and mitochondriasingularity exec -B /projects/b1057/ -B /projects/b1057/baboons_mm_sj_training -B /projects/b1057 /projects/b1057/qiime2-core2020-2.simg qiime taxa filter-table --i-table /projects/b1057/baboons_mm_sj_training/maddy/table-275.qza --i-taxonomy /projects/b1057/baboons_mm_sj_training/maddy/taxonomy.qza --p-exclude mitochondria,chloroplast --o-filtered-table /projects/b1057/baboons_mm_sj_training/maddy/nomito-nochloro-table.qza#visualize datasingularity exec -B /projects/b1057/ -B /projects/b1057/baboons_mm_sj_training -B /projects/b1057 /projects/b1057/qiime2-core2020-2.simg qiime feature-table summarize --i-table /projects/b1057/baboons_mm_sj_training/maddy/nomito-nochloro-table.qza --o-visualization /projects/b1057/baboons_mm_sj_training/maddy/nomito-nochloro-table.qzv #filter out negativessingularity exec -B /projects/b1057/ -B /projects/b1057/baboons_mm_sj_training -B /projects/b1057 /projects/b1057/qiime2-core2020-2.simg qiime feature-table filter-samples --i-table /projects/b1057/baboons_mm_sj_training/maddy/nomito-nochloro-table.qza --m-metadata-file /projects/b1057/baboons_mm_sj_training/maddy/baboonmetadata.txt --o-filtered-table /projects/b1057/baboons_mm_sj_training/maddy/nonegatives_table.qza#visualize datasingularity exec -B /projects/b1057/ -B /projects/b1057/baboons_mm_sj_training -B /projects/b1057 /projects/b1057/qiime2-core2020-2.simg qiime feature-table summarize --i-table /projects/b1057/baboons_mm_sj_training/maddy/nonegatives_table.qza --o-visualization /projects/b1057/baboons_mm_sj_training/maddy/nomito-nochloro-filtered-table.qzv --m-sample-metadata-file /projects/b1057/baboons_mm_sj_training/maddy/baboonmetadata.txt#taxa barplotssingularity exec -B /projects/b1057/ -B /projects/b1057/baboons_mm_sj_training -B /projects/b1057 /projects/b1057/qiime2-core2020-2.simg qiime taxa barplot --i-table /projects/b1057/baboons_mm_sj_training/maddy/nonegatives_table.qza --i-taxonomy /projects/b1057/baboons_mm_sj_training/maddy/taxonomy.qza --m-metadata-file /projects/b1057/baboons_mm_sj_training/maddy/baboonmetadata.txt --o-visualization /projects/b1057/baboons_mm_sj_training/maddy/taxa-bar-plots.qzv#generating alpha rarefication curvesingularity exec -B /projects/b1057/ -B /projects/b1057/baboons_mm_sj_training -B /projects/b1057 /projects/b1057/qiime2-core2020-2.simg qiime diversity alpha-rarefaction --i-table /projects/b1057/baboons_mm_sj_training/maddy/nonegatives_table.qza --i-phylogeny /projects/b1057/baboons_mm_sj_training/maddy/rooted-tree.qza --o-visualization /projects/b1057/baboons_mm_sj_training/maddy/alpha_rarefaction --p-max-depth 16000#calculating core metrics (beta/alpha matrix) singularity exec -B /projects/b1057/ -B /projects/b1057/baboons_mm_sj_training -B /projects/b1057 /projects/b1057/qiime2-core2020-2.simg qiime diversity core-metrics-phylogenetic --i-phylogeny /projects/b1057/baboons_mm_sj_training/maddy/rooted-tree.qza --i-table /projects/b1057/baboons_mm_sj_training/maddy/nonegatives_table.qza --p-sampling-depth 10000 --m-metadata-file /projects/b1057/baboons_mm_sj_training/maddy/baboonmetadata.txt --output-dir /projects/b1057/baboons_mm_sj_training/maddy/core-metrics-results#visualizing ordination plotssingularity exec -B /projects/b1057/ -B /projects/b1057/baboons_mm_sj_training -B /projects/b1057 /projects/b1057/qiime2-core2020-2.simg qiime emperor plot --i-pcoa /projects/b1057/baboons_mm_sj_training/maddy/core-metrics-results/unweighted_unifrac_pcoa_results.qza --m-metadata-file /projects/b1057/baboons_mm_sj_training/maddy/baboonmetadata.txt --o-visualization /projects/b1057/baboons_mm_sj_training/maddy/emperor_unweighted_unifrac_pcoa_results.qzv?#visualizing ordination plotssingularity exec -B /projects/b1057/ -B /projects/b1057/baboons_mm_sj_training -B /projects/b1057 /projects/b1057/qiime2-core2020-2.simg qiime emperor plot --i-pcoa /projects/b1057/baboons_mm_sj_training/maddy/core-metrics-results/weighted_unifrac_pcoa_results.qza --m-metadata-file /projects/b1057/baboons_mm_sj_training/maddy/baboonmetadata.txt --o-visualization /projects/b1057/baboons_mm_sj_training/maddy/emperor_weighted_unifrac_pcoa_results.qzv#export weighted distance matrixsingularity exec -B /projects/b1057/ -B /projects/b1057/baboons_mm_sj_training -B /projects/b1057 /projects/b1057/qiime2-core2020-2.simg qiime tools extract --input-path /projects/b1057/baboons_mm_sj_training/maddy/core-metrics-results/weighted_unifrac_distance_matrix.qza --output-path /projects/b1057/baboons_mm_sj_training/maddy/core-metrics-results/?#export unweighted distance matrixsingularity exec -B /projects/b1057/ -B /projects/b1057/baboons_mm_sj_training -B /projects/b1057 /projects/b1057/qiime2-core2020-2.simg qiime tools extract --input-path /projects/b1057/baboons_mm_sj_training/maddy/core-metrics-results/unweighted_unifrac_distance_matrix.qza --output-path /projects/b1057/baboons_mm_sj_training/maddy/core-metrics-results/#export Bray-Curtis matrixsingularity exec -B /projects/b1057/ -B /projects/b1057/baboons_mm_sj_training -B /projects/b1057 /projects/b1057/qiime2-core2020-2.simg qiime tools export --input-path /projects/b1057/baboons_mm_sj_training/maddy/core-metrics-results/bray_curtis_distance_matrix.qza --output-path /projects/b1057/baboons_mm_sj_training/maddy/core-metrics-results/bray_curtis_distance_matrix.txt?#export alpha diversity: faithpdsingularity exec -B /projects/b1057/ -B /projects/b1057/baboons_mm_sj_training -B /projects/b1057 /projects/b1057/qiime2-core2020-2.simg qiime tools extract --input-path /projects/b1057/baboons_mm_sj_training/maddy/core-metrics-results/faith_pd_vector.qza --output-path /projects/b1057/baboons_mm_sj_training/maddy/core-metrics-results/#export alpha diversity: observed OTUssingularity exec -B /projects/b1057/ -B /projects/b1057/baboons_mm_sj_training -B /projects/b1057 /projects/b1057/qiime2-core2020-2.simg qiime tools extract --input-path /projects/b1057/baboons_mm_sj_training/maddy/core-metrics-results/observed_otus_vector.qza --output-path /projects/b1057/baboons_mm_sj_training/maddy/core-metrics-results/#export alpha diversity: shannonsingularity exec -B /projects/b1057/ -B /projects/b1057/baboons_mm_sj_training -B /projects/b1057 /projects/b1057/qiime2-core2020-2.simg qiime tools extract --input-path /projects/b1057/baboons_mm_sj_training/maddy/core-metrics-results/shannon_vector.qza --output-path /projects/b1057/baboons_mm_sj_training/maddy/core-metrics-results/#export taxonomysingularity exec -B /projects/b1057/ -B /projects/b1057/baboons_mm_sj_training -B /projects/b1057 /projects/b1057/qiime2-core2020-2.simg qiime tools export --input-path /projects/b1057/baboons_mm_sj_training/maddy/taxonomy.qza --output-path /projects/b1057/baboons_mm_sj_training/maddy/taxonomy.txt#export unrarefied ASV level (count) feature tablesingularity exec -B /projects/b1057/ -B /projects/b1057/baboons_mm_sj_training -B /projects/b1057 /projects/b1057/qiime2-core2020-2.simg qiime tools extract --input-path /projects/b1057/baboons_mm_sj_training/maddy/nonegatives_table.qza --output-path /projects/b1057/baboons_mm_sj_training/maddy#merge ASV count table with taxonomysingularity exec -B /projects/b1057/ -B /projects/b1057/baboons_mm_sj_training -B /projects/b1057 /projects/b1057/qiime2-core2020-2.simg biom add-metadata -i /projects/b1057/baboons_mm_sj_training/maddy/feature-table.biom -o /projects/b1057/baboons_mm_sj_training/maddy/feature-table-taxonomy.biom --observation-metadata-fp /projects/b1057/baboons_mm_sj_training/maddy/biome-taxonomy.txt --sc-separated taxonomy#convert to tsvsingularity exec -B /projects/b1057/ -B /projects/b1057/baboons_mm_sj_training -B /projects/b1057 /projects/b1057/qiime2-core2020-2.simg biom convert -i feature-table-taxonomy.biom -o taxonomy-table-from-biom-lefse.txt --to-tsv --header-key taxonomy#core microbiome calculationsingularity exec -B /projects/b1057/ -B /projects/b1057/baboons_mm_sj_training -B /projects/b1057 /projects/b1057/qiime2-core2020-2.simg qiime feature-table core-features --i-table /projects/b1057/baboons_mm_sj_training/maddy/nonegatives_table.qza --p-min-fraction 0.8 --p-steps 6 --output-dir /projects/b1057/baboons_mm_sj_training/maddy/core#filtering: keeping no access to trash onlysingularity exec -B /projects/b1057/skuthyar -B /projects/b1057/baboons_mm_sj_training -B /projects/b1057 /projects/b1057/qiime2-core2020-2.simg qiime feature-table filter-samples --i-table /projects/b1057/baboons_mm_sj_training/maddy/nonegatives_table.qza --m-metadata-file /projects/b1057/baboons_mm_sj_training/maddy/baboonmetadata.txt --p-where "[access_trash]='No access to trash'" --o-filtered-table /projects/b1057/baboons_mm_sj_training/maddy/noaccesstrash-table.qza#keeping unlimitedsingularity exec -B /projects/b1057/skuthyar -B /projects/b1057/baboons_mm_sj_training -B /projects/b1057 /projects/b1057/qiime2-core2020-2.simg qiime feature-table filter-samples --i-table /projects/b1057/baboons_mm_sj_training/maddy/nonegatives_table.qza --m-metadata-file /projects/b1057/baboons_mm_sj_training/maddy/baboonmetadata.txt --p-where "[access_trash]='Unlimited access to trash'" --o-filtered-table /projects/b1057/baboons_mm_sj_training/maddy/unlimitedtrash-table.qza#keeping limited singularity exec -B /projects/b1057/skuthyar -B /projects/b1057/baboons_mm_sj_training -B /projects/b1057 /projects/b1057/qiime2-core2020-2.simg qiime feature-table filter-samples --i-table /projects/b1057/baboons_mm_sj_training/maddy/nonegatives_table.qza --m-metadata-file /projects/b1057/baboons_mm_sj_training/maddy/baboonmetadata.txt --p-where "[access_trash]='Limited access to trash'" --o-filtered-table /projects/b1057/baboons_mm_sj_training/maddy/limitedtrash-table.qza#relative abundance table (frequency)singularity exec -B /projects/b1057/ -B /projects/b1057/baboons_mm_sj_training -B /projects/b1057 /projects/b1057/qiime2-core2020-2.simg qiime feature-table relative-frequency --i-table /projects/b1057/baboons_mm_sj_training/maddy/nonegatives_table.qza --o-relative-frequency-table /projects/b1057/baboons_mm_sj_training/maddy/unrarefied_filtered_relative_ab_table.qza#export relative abundance tablesingularity exec -B /projects/b1057/ -B /projects/b1057/baboons_mm_sj_training -B /projects/b1057 /projects/b1057/qiime2-core2020-2.simg qiime tools export --input-path /projects/b1057/baboons_mm_sj_training/maddy/unrarefied_filtered_relative_ab_table.qza --output-path /projects/b1057/baboons_mm_sj_training/maddy/unrarefied_exported_table#merge relative abundance table with taxonomysingularity exec -B /projects/b1057/ -B /projects/b1057/baboons_mm_sj_training -B /projects/b1057 /projects/b1057/qiime2-core2020-2.simg biom add-metadata -i /projects/b1057/baboons_mm_sj_training/maddy/unrarefied_filtered_relative_ab_feature_table.biom -o /projects/b1057/baboons_mm_sj_training/maddy/unrarefied-relab-feature-table-taxonomy.biom --observation-metadata-fp /projects/b1057/baboons_mm_sj_training/maddy/baboon-biom-taxonomy.tsv --sc-separated taxonomy#convert to tsvsingularity exec -B /projects/b1057/ -B /projects/b1057/baboons_mm_sj_training -B /projects/b1057 /projects/b1057/qiime2-core2020-2.simg biom convert -i unrarefied-relab-feature-table-taxonomy.biom -o relab-table-from-biom-loops.txt --to-tsv --header-key taxonomy?